2026-01-12 03:27:17,014 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot8509058628:AAE_Toj7kIUlcdscvLq2gbJnVGRCI9Q-PpQ
2026-01-12 03:27:17,014 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot8509058628:AAE_Toj7kIUlcdscvLq2gbJnVGRCI9Q-PpQ
2026-01-12 03:27:17,015 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-12 03:27:17,030 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2026-01-12 03:27:17,031 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2026-01-12 03:27:20,580 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 8509058628, 'is_bot': True, 'first_name': 'Ученик', 'username': 'lab7_vlad_bot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False, 'has_topics_enabled': False}`
2026-01-12 03:27:20,581 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2026-01-12 03:27:20,581 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Action succeeded. Stopping loop.
2026-01-12 03:27:20,581 - telegram.ext.Updater - DEBUG - Updater started (polling)
2026-01-12 03:27:20,581 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2026-01-12 03:27:20,582 - telegram.ext.Updater - DEBUG - Deleting webhook
2026-01-12 03:27:20,582 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2026-01-12 03:27:20,655 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2026-01-12 03:27:20,655 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Action succeeded. Stopping loop.
2026-01-12 03:27:20,656 - telegram.ext.Updater - DEBUG - Bootstrap done
2026-01-12 03:27:20,656 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2026-01-12 03:27:20,656 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2026-01-12 03:27:20,657 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2026-01-12 03:27:20,657 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 0, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
2026-01-12 03:27:20,658 - telegram.ext.Application - INFO - Application started
2026-01-12 03:27:28,091 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 714779957, 'message': {'message_id': 3, 'from': {'id': 1040924745, 'is_bot': False, 'first_name': 'Vlad', 'username': 'tipood', 'language_code': 'ru', 'is_premium': True}, 'chat': {'id': 1040924745, 'first_name': 'Vlad', 'username': 'tipood', 'type': 'private'}, 'date': 1768177646, 'text': 'Привет'}}]`
2026-01-12 03:27:28,092 - telegram.ext.ExtBot - DEBUG - Getting updates: [714779957]
2026-01-12 03:27:28,092 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Vlad', id=1040924745, type=<ChatType.PRIVATE>, username='tipood'), date=datetime.datetime(2026, 1, 12, 0, 27, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Vlad', id=1040924745, is_bot=False, is_premium=True, language_code='ru', username='tipood'), group_chat_created=False, message_id=3, supergroup_chat_created=False, text='Привет'), update_id=714779957)
2026-01-12 03:27:28,093 - model - DEBUG - Messages: [{'role': 'system', 'content': 'Действуй как консультант по интернет-тарифам. \nЗдоровайся с пользователем только при первом взаимодействии. \nВ диалоге называй пользователя по имени. \n\nКонтекст: \n### 1. Базовый тариф\n* **Скорость:** до 100 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 500 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Подходит для повседневного использования\n  * Оптимален для одного пользователя\n  * Просмотр видео в стандартном качестве\n\n### 2. Семейный тариф\n* **Скорость:** до 300 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 700 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Подключение до 5 устройств\n  * Одновременный просмотр видео\n  * Загрузка файлов со средней скоростью\n\n### 3. Премиум-тариф\n* **Скорость:** до 500 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 900 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Мгновенная загрузка контента\n  * Поддержка 4K-видео\n  * Подходит для большой семьи\n\n### 4. Игровой тариф\n* **Скорость:** до 890 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 950 рублей/месяц\n* **Особенности:**\n  * Минимальная задержка\n  * Приоритетный трафик для игр\n  * Бонусы от игровых платформ\n  * Стабильное соединение\n\n### 5. Гигабитный тариф\n* **Скорость:** до 1000 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 1040 рублей/месяц\n* **Особенности:**\n  * Максимальная скорость передачи данных\n  * Идеален для стримеров\n  * Быстрая загрузка больших файлов\n  * Поддержка множества устройств одновременно\n\n'}, {'role': 'user', 'content': 'Привет. Имя пользователя: Vlad'}]
2026-01-12 03:27:28,340 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-52b0da42-c849-47c3-8ae3-6c80755de0dd', 'json_data': {'messages': [{'role': 'system', 'content': 'Действуй как консультант по интернет-тарифам. \nЗдоровайся с пользователем только при первом взаимодействии. \nВ диалоге называй пользователя по имени. \n\nКонтекст: \n### 1. Базовый тариф\n* **Скорость:** до 100 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 500 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Подходит для повседневного использования\n  * Оптимален для одного пользователя\n  * Просмотр видео в стандартном качестве\n\n### 2. Семейный тариф\n* **Скорость:** до 300 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 700 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Подключение до 5 устройств\n  * Одновременный просмотр видео\n  * Загрузка файлов со средней скоростью\n\n### 3. Премиум-тариф\n* **Скорость:** до 500 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 900 рублей/месяц\n* **Особенности:**\n  * Безлимитный интернет\n  * Мгновенная загрузка контента\n  * Поддержка 4K-видео\n  * Подходит для большой семьи\n\n### 4. Игровой тариф\n* **Скорость:** до 890 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 950 рублей/месяц\n* **Особенности:**\n  * Минимальная задержка\n  * Приоритетный трафик для игр\n  * Бонусы от игровых платформ\n  * Стабильное соединение\n\n### 5. Гигабитный тариф\n* **Скорость:** до 1000 Мбит/с\n* **Тип подключения:** FTTB\n* **Стоимость:** от 1040 рублей/месяц\n* **Особенности:**\n  * Максимальная скорость передачи данных\n  * Идеален для стримеров\n  * Быстрая загрузка больших файлов\n  * Поддержка множества устройств одновременно\n\n'}, {'role': 'user', 'content': 'Привет. Имя пользователя: Vlad'}], 'model': 'gpt://b1g96du0t58c928tsmj1/yandexgpt-lite', 'max_tokens': 256, 'temperature': 0.3}}
2026-01-12 03:27:28,348 - openai._base_client - DEBUG - Sending HTTP Request: POST https://llm.api.cloud.yandex.net/v1/chat/completions
2026-01-12 03:27:29,380 - openai._base_client - DEBUG - HTTP Response: POST https://llm.api.cloud.yandex.net/v1/chat/completions "200 OK" Headers({'content-type': 'application/json', 'x-client-request-id': '', 'x-request-id': '380de038-14f3-4d98-9c60-42e87af23e60', 'date': 'Mon, 12 Jan 2026 00:27:27 GMT', 'content-length': '380', 'x-server-trace-id': '1df778c4794da781:4916c069bb159c6b:41d5c436040b2fca:1', 'server': 'ycalb'})
2026-01-12 03:27:29,380 - openai._base_client - DEBUG - request_id: 380de038-14f3-4d98-9c60-42e87af23e60
2026-01-12 03:27:29,388 - model - DEBUG - Response: ChatCompletion(id='e0e9d71a-ec77-4040-aa1b-5fc0343f68d0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='Здравствуйте, Vlad! Чем я могу вам помочь?', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None))], created=1768177647, model='gpt://b1g96du0t58c928tsmj1/yandexgpt-lite', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=460, total_tokens=470, completion_tokens_details=None, prompt_tokens_details=None))
2026-01-12 03:27:29,389 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1040924745, 'text': 'Здравствуйте, Vlad! Чем я могу вам помочь?'}`
2026-01-12 03:27:29,390 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 714779958, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
2026-01-12 03:27:29,698 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 4, 'from': {'id': 8509058628, 'is_bot': True, 'first_name': 'Ученик', 'username': 'lab7_vlad_bot'}, 'chat': {'id': 1040924745, 'first_name': 'Vlad', 'username': 'tipood', 'type': 'private'}, 'date': 1768177648, 'text': 'Здравствуйте, Vlad! Чем я могу вам помочь?'}`
2026-01-12 03:27:39,519 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2026-01-12 03:27:39,519 - telegram.ext.ExtBot - DEBUG - No new updates found.
2026-01-12 03:27:39,520 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 714779958, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
2026-01-12 03:27:49,656 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2026-01-12 03:27:49,656 - telegram.ext.ExtBot - DEBUG - No new updates found.
2026-01-12 03:27:49,656 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 714779958, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
2026-01-12 03:27:59,794 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2026-01-12 03:27:59,794 - telegram.ext.ExtBot - DEBUG - No new updates found.
2026-01-12 03:27:59,794 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 714779958, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
2026-01-12 03:28:09,931 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2026-01-12 03:28:09,932 - telegram.ext.ExtBot - DEBUG - No new updates found.
2026-01-12 03:28:09,932 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': datetime.timedelta(seconds=10), 'offset': 714779958, 'allowed_updates': [<UpdateType.MESSAGE>, <UpdateType.EDITED_MESSAGE>, <UpdateType.CHANNEL_POST>, <UpdateType.EDITED_CHANNEL_POST>, <UpdateType.INLINE_QUERY>, <UpdateType.CHOSEN_INLINE_RESULT>, <UpdateType.CALLBACK_QUERY>, <UpdateType.SHIPPING_QUERY>, <UpdateType.PRE_CHECKOUT_QUERY>, <UpdateType.POLL>, <UpdateType.POLL_ANSWER>, <UpdateType.MY_CHAT_MEMBER>, <UpdateType.CHAT_MEMBER>, <UpdateType.CHAT_JOIN_REQUEST>, <UpdateType.CHAT_BOOST>, <UpdateType.REMOVED_CHAT_BOOST>, <UpdateType.MESSAGE_REACTION>, <UpdateType.MESSAGE_REACTION_COUNT>, <UpdateType.BUSINESS_CONNECTION>, <UpdateType.BUSINESS_MESSAGE>, <UpdateType.EDITED_BUSINESS_MESSAGE>, <UpdateType.DELETED_BUSINESS_MESSAGES>, <UpdateType.PURCHASED_PAID_MEDIA>]}`
